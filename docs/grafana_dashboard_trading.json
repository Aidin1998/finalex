{
  "title": "Trading Service Performance & Tracing",
  "panels": [
    {
      "type": "graph",
      "title": "Order Processing Latency",
      "targets": [
        { "expr": "histogram_quantile(0.95, sum(rate(pincex_order_processing_latency_seconds_bucket[5m])) by (le))", "legendFormat": "p95 latency" }
      ]
    },
    {
      "type": "stat",
      "title": "Orders Processed (Total)",
      "targets": [
        { "expr": "sum(increase(pincex_orders_processed_total[1h]))", "legendFormat": "orders" }
      ]
    },
    {
      "type": "table",
      "title": "HTTP Request Metrics",
      "targets": [
        { "expr": "sum(rate(pincex_http_requests_total[5m])) by (path, method, status)", "legendFormat": "{{path}} {{method}} {{status}}" }
      ]
    },
    {
      "type": "stat",
      "title": "Failed Orders (5m)",
      "targets": [
        { "expr": "sum(increase(pincex_http_requests_total{status=~\"5..\"}[5m]))", "legendFormat": "5xx errors" }
      ]
    },
    {
      "type": "trace",
      "title": "Distributed Traces",
      "datasource": "tempo",
      "targets": [
        { "query": "service.name='trading.Service'" }
      ]
    }
  ]
}
